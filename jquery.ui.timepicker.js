(function($){function Timepicker(){this.debug=true;this._curInst=null;this._disabledInputs=[];this._timepickerShowing=false;this._inDialog=false;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"};this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:false,showPeriodLabels:true,showLeadingZero:true,showMinutesLeadingZero:true,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5,manual:[]},rows:4,showHours:true,showMinutes:true,optionalMinutes:false,showCloseButton:false,showNowButton:false,showDeselectButton:false,maxTime:{hour:null,minute:null},minTime:{hour:null,minute:null}};$.extend(this._defaults,this.regional[""]);this.tpDiv=$('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{timepicker:{version:"0.3.3"}});var PROP_NAME="timepicker",tpuuid=(new Date).getTime();$.extend(Timepicker.prototype,{markerClassName:"hasTimepicker",log:function(){if(this.debug)console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(e){extendRemove(this._defaults,e||{});return this},_attachTimepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("time:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=nodeName=="div"||nodeName=="span";if(!target.id){this.uuid+=1;target.id="tp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectTimepicker(target,inst);this._setTimeFromField(inst)}else if(inline){this._inlineTimepicker(target,inst)}},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,inline:t,tpDiv:!t?this.tpDiv:$('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(e,t){var n=$(e);t.append=$([]);t.trigger=$([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,t);n.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(e,n,r){t.settings[n]=r}).bind("getData.timepicker",function(e,n){return this._get(t,n)});$.data(e,PROP_NAME,t)},_doKeyDown:function(e){var t=$.timepicker._getInst(e.target);var n=true;t._keyEvent=true;if($.timepicker._timepickerShowing){switch(e.keyCode){case 9:$.timepicker._hideTimepicker();n=false;break;case 13:$.timepicker._updateSelectedValue(t);$.timepicker._hideTimepicker();return false;break;case 27:$.timepicker._hideTimepicker();break;default:n=false}}else if(e.keyCode==36&&e.ctrlKey){$.timepicker._showTimepicker(this)}else{n=false}if(n){e.preventDefault();e.stopPropagation()}},_doKeyUp:function(e){var t=$.timepicker._getInst(e.target);$.timepicker._setTimeFromField(t);$.timepicker._updateTimepicker(t)},_attachments:function(e,t){var n=this._get(t,"appendText");var r=this._get(t,"isRTL");if(t.append){t.append.remove()}if(n){t.append=$('<span class="'+this._appendClass+'">'+n+"</span>");e[r?"before":"after"](t.append)}e.unbind("focus.timepicker",this._showTimepicker);e.unbind("click.timepicker",this._adjustZIndex);if(t.trigger){t.trigger.remove()}var i=this._get(t,"showOn");if(i=="focus"||i=="both"){e.bind("focus.timepicker",this._showTimepicker);e.bind("click.timepicker",this._adjustZIndex)}if(i=="button"||i=="both"){var s=this._get(t,"button");if(s==null){s=$('<button class="ui-timepicker-trigger" type="button">...</button>');e.after(s)}$(s).bind("click.timepicker",function(){if($.timepicker._timepickerShowing&&$.timepicker._lastInput==e[0]){$.timepicker._hideTimepicker()}else if(!t.input.is(":disabled")){$.timepicker._showTimepicker(e[0])}return false})}},_inlineTimepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.tpDiv).bind("setData.timepicker",function(e,n,r){t.settings[n]=r}).bind("getData.timepicker",function(e,n){return this._get(t,n)});$.data(e,PROP_NAME,t);this._setTimeFromField(t);this._updateTimepicker(t);t.tpDiv.show()},_adjustZIndex:function(e){e=e.target||e;var t=$.timepicker._getInst(e);t.tpDiv.css("zIndex",$.timepicker._getZIndex(e)+1)},_showTimepicker:function(e){e=e.target||e;if(e.nodeName.toLowerCase()!="input"){e=$("input",e.parentNode)[0]}if($.timepicker._isDisabledTimepicker(e)||$.timepicker._lastInput==e){return}$.timepicker._hideTimepicker();var t=$.timepicker._getInst(e);if($.timepicker._curInst&&$.timepicker._curInst!=t){$.timepicker._curInst.tpDiv.stop(true,true)}var n=$.timepicker._get(t,"beforeShow");extendRemove(t.settings,n?n.apply(e,[e,t]):{});t.lastVal=null;$.timepicker._lastInput=e;$.timepicker._setTimeFromField(t);if($.timepicker._inDialog){e.value=""}if(!$.timepicker._pos){$.timepicker._pos=$.timepicker._findPos(e);$.timepicker._pos[1]+=e.offsetHeight}var r=false;$(e).parents().each(function(){r|=$(this).css("position")=="fixed";return!r});var i={left:$.timepicker._pos[0],top:$.timepicker._pos[1]};$.timepicker._pos=null;t.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.timepicker._updateTimepicker(t);if(!t.inline&&typeof $.ui.position=="object"){t.tpDiv.position({of:t.input,my:$.timepicker._get(t,"myPosition"),at:$.timepicker._get(t,"atPosition"),collision:"flip"});var i=t.tpDiv.offset();$.timepicker._pos=[i.top,i.left]}t._hoursClicked=false;t._minutesClicked=false;i=$.timepicker._checkOffset(t,i,r);t.tpDiv.css({position:$.timepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"});if(!t.inline){var s=$.timepicker._get(t,"showAnim");var o=$.timepicker._get(t,"duration");var u=function(){$.timepicker._timepickerShowing=true;var e=$.timepicker._getBorders(t.tpDiv);t.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:t.tpDiv.outerWidth(),height:t.tpDiv.outerHeight()})};$.timepicker._adjustZIndex(e);if($.effects&&$.effects[s]){t.tpDiv.show(s,$.timepicker._get(t,"showOptions"),o,u)}else{t.tpDiv.show(s?o:null,u)}if(!s||!o){u()}if(t.input.is(":visible")&&!t.input.is(":disabled")){t.input.focus()}$.timepicker._curInst=t}},_getZIndex:function(e){var t=$(e);var n=0;var r,i;while(t.length&&t[0]!==document){r=t.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(t.css("zIndex"),10);if(!isNaN(i)&&i!==0){if(i>n){n=i}}}t=t.parent()}return n},_refreshTimepicker:function(e){var t=this._getInst(e);if(t){this._updateTimepicker(t)}},_updateTimepicker:function(e){e.tpDiv.empty().append(this._generateHTML(e));this._rebindDialogEvents(e)},_rebindDialogEvents:function(e){var t=$.timepicker._getBorders(e.tpDiv),n=this;e.tpDiv.find("iframe.ui-timepicker-cover").css({left:-t[0],top:-t[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:false},$.proxy($.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:true},$.proxy($.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:false},$.proxy($.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:true},$.proxy($.timepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-timepicker-prev")!=-1)$(this).removeClass("ui-timepicker-prev-hover");if(this.className.indexOf("ui-timepicker-next")!=-1)$(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){if(!n._isDisabledTimepicker(e.inline?e.tpDiv.parent()[0]:e.input[0])){$(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-timepicker-prev")!=-1)$(this).addClass("ui-timepicker-prev-hover");if(this.className.indexOf("ui-timepicker-next")!=-1)$(this).addClass("ui-timepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(e){$.timepicker.selectNow(e)}).end().find(".ui-timepicker-deselect").bind("click",function(e){$.timepicker.deselectTime(e)}).end().find(".ui-timepicker-close").bind("click",function(e){$.timepicker._hideTimepicker()}).end()},_generateHTML:function(e){var t,n,r,i,s,o,u="",a=this._get(e,"showPeriod")==true,f=this._get(e,"showPeriodLabels")==true,l=this._get(e,"showLeadingZero")==true,c=this._get(e,"showHours")==true,h=this._get(e,"showMinutes")==true,p=this._get(e,"amPmText"),d=this._get(e,"rows"),v=0,m=0,g=0,y=0,b=0,w=0,E=Array(),S=this._get(e,"hours"),x=null,T=0,N=this._get(e,"hourText"),C=this._get(e,"showCloseButton"),k=this._get(e,"closeButtonText"),L=this._get(e,"showNowButton"),A=this._get(e,"nowButtonText"),O=this._get(e,"showDeselectButton"),M=this._get(e,"deselectButtonText"),_=C||L||O;for(t=S.starts;t<=S.ends;t++){E.push(t)}x=Math.ceil(E.length/d);if(f){for(T=0;T<E.length;T++){if(E[T]<12){g++}else{y++}}T=0;v=Math.floor(g/E.length*d);m=Math.floor(y/E.length*d);if(d!=v+m){if(g&&(!y||!v||m&&g/v>=y/m)){v++}else{m++}}b=Math.min(v,1);w=v+1;if(v==0){x=Math.ceil(y/m)}else if(m==0){x=Math.ceil(g/v)}else{x=Math.ceil(Math.max(g/v,y/m))}}s='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>';if(c){s+='<td class="ui-timepicker-hours">'+'<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+N+"</div>"+'<table class="ui-timepicker">';for(r=1;r<=d;r++){s+="<tr>";if(r==b&&f){s+='<th rowspan="'+v.toString()+'" class="periods" scope="row">'+p[0]+"</th>"}if(r==w&&f){s+='<th rowspan="'+m.toString()+'" class="periods" scope="row">'+p[1]+"</th>"}for(i=1;i<=x;i++){if(f&&r<w&&E[T]>=12){s+=this._generateHTMLHourCell(e,undefined,a,l)}else{s+=this._generateHTMLHourCell(e,E[T],a,l);T++}}s+="</tr>"}s+="</table>"+"</td>"}if(h){s+='<td class="ui-timepicker-minutes">';s+=this._generateHTMLMinutes(e);s+="</td>"}s+="</tr>";if(_){var D='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">';if(L){D+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all" '+' data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+A+"</button>"}if(O){D+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all" '+' data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+M+"</button>"}if(C){D+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all" '+' data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+k+"</button>"}s+=D+"</div></td></tr>"}s+="</table>";return s},_updateMinuteDisplay:function(e){var t=this._generateHTMLMinutes(e);e.tpDiv.find("td.ui-timepicker-minutes").html(t);this._rebindDialogEvents(e)},_generateHTMLMinutes:function(e){var t,n,r="",s=this._get(e,"rows"),o=Array(),u=this._get(e,"minutes"),a=null,f=0,l=this._get(e,"showMinutesLeadingZero")==true,c=this._get(e,"onMinuteShow"),h=this._get(e,"minuteText");if(!u.starts){u.starts=0}if(!u.ends){u.ends=59}if(!u.manual){u.manual=[]}for(t=u.starts;t<=u.ends;t+=u.interval){o.push(t)}for(i=0;i<u.manual.length;i++){var p=u.manual[i];if(typeof p!="number"||p<0||p>59||$.inArray(p,o)>=0){continue}o.push(p)}o.sort(function(e,t){return e-t});a=Math.round(o.length/s+.49);if(c&&c.apply(e.input?e.input[0]:null,[e.hours,e.minutes])==false){for(f=0;f<o.length;f+=1){t=o[f];if(c.apply(e.input?e.input[0]:null,[e.hours,t])){e.minutes=t;break}}}r+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+h+"</div>"+'<table class="ui-timepicker">';f=0;for(n=1;n<=s;n++){r+="<tr>";while(f<n*a){var t=o[f];var d="";if(t!==undefined){d=t<10&&l?"0"+t.toString():t.toString()}r+=this._generateHTMLMinuteCell(e,t,d);f++}r+="</tr>"}r+="</table>";return r},_generateHTMLHourCell:function(e,t,n,r){var i=t;if(t>12&&n){i=t-12}if(i==0&&n){i=12}if(i<10&&r){i="0"+i}var s="";var o=true;var u=this._get(e,"onHourShow");var a=this._get(e,"maxTime");var f=this._get(e,"minTime");if(t==undefined){s='<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';return s}if(u){o=u.apply(e.input?e.input[0]:null,[t])}if(o){if(!isNaN(parseInt(a.hour))&&t>a.hour)o=false;if(!isNaN(parseInt(f.hour))&&t<f.hour)o=false}if(o){s='<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" data-hour="'+t.toString()+'">'+'<a class="ui-state-default '+(t==e.hours?"ui-state-active":"")+'">'+i.toString()+"</a></td>"}else{s="<td>"+'<span class="ui-state-default ui-state-disabled '+(t==e.hours?" ui-state-active ":" ")+'">'+i.toString()+"</span>"+"</td>"}return s},_generateHTMLMinuteCell:function(e,t,n){var r="";var i=true;var s=e.hours;var o=this._get(e,"onMinuteShow");var u=this._get(e,"maxTime");var a=this._get(e,"minTime");if(o){i=o.apply(e.input?e.input[0]:null,[e.hours,t])}if(t==undefined){r='<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';return r}if(i&&s!==null){if(!isNaN(parseInt(u.hour))&&!isNaN(parseInt(u.minute))&&s>=u.hour&&t>u.minute)i=false;if(!isNaN(parseInt(a.hour))&&!isNaN(parseInt(a.minute))&&s<=a.hour&&t<a.minute)i=false}if(i){r='<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" data-minute="'+t.toString()+'" >'+'<a class="ui-state-default '+(t==e.minutes?"ui-state-active":"")+'" >'+n+"</a></td>"}else{r="<td>"+'<span class="ui-state-default ui-state-disabled" >'+n+"</span>"+"</td>"}return r},_destroyTimepicker:function(e){var t=$(e);var n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME);if(r=="input"){n.append.remove();n.trigger.remove();t.removeClass(this.markerClassName).unbind("focus.timepicker",this._showTimepicker).unbind("click.timepicker",this._adjustZIndex)}else if(r=="div"||r=="span")t.removeClass(this.markerClassName).empty()},_enableTimepicker:function(e){var t=$(e),n=t.attr("id"),r=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var i=e.nodeName.toLowerCase();if(i=="input"){e.disabled=false;var s=this._get(r,"button");$(s).removeClass("ui-state-disabled").disabled=false;r.trigger.filter("button").each(function(){this.disabled=false}).end()}else if(i=="div"||i=="span"){var o=t.children("."+this._inlineClass);o.children().removeClass("ui-state-disabled");o.find("button").each(function(){this.disabled=false})}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==n?null:e})},_disableTimepicker:function(e){var t=$(e);var n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){var i=this._get(n,"button");$(i).addClass("ui-state-disabled").disabled=true;e.disabled=true;n.trigger.filter("button").each(function(){this.disabled=true}).end()}else if(r=="div"||r=="span"){var s=t.children("."+this._inlineClass);s.children().addClass("ui-state-disabled");s.find("button").each(function(){this.disabled=true})}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t});this._disabledInputs[this._disabledInputs.length]=t.attr("id")},_isDisabledTimepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]==e){return true}}return false},_checkOffset:function(e,t,n){var r=e.tpDiv.outerWidth();var i=e.tpDiv.outerHeight();var s=e.input?e.input.outerWidth():0;var o=e.input?e.input.outerHeight():0;var u=document.documentElement.clientWidth+$(document).scrollLeft();var a=document.documentElement.clientHeight+$(document).scrollTop();t.left-=this._get(e,"isRTL")?r-s:0;t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0;t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0;t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0);t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0);return t},_findPos:function(e){var t=this._getInst(e);var n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1)){e=e[n?"previousSibling":"nextSibling"]}var r=$(e).offset();return[r.left,r.top]},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkExternalClick:function(e){if(!$.timepicker._curInst){return}var t=$(e.target);if(t[0].id!=$.timepicker._mainDivId&&t.parents("#"+$.timepicker._mainDivId).length==0&&!t.hasClass($.timepicker.markerClassName)&&!t.hasClass($.timepicker._triggerClass)&&$.timepicker._timepickerShowing&&!($.timepicker._inDialog&&$.blockUI))$.timepicker._hideTimepicker()},_hideTimepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME)){return}if(this._timepickerShowing){var n=this._get(t,"showAnim");var r=this._get(t,"duration");var i=function(){$.timepicker._tidyDialog(t);this._curInst=null};if($.effects&&$.effects[n]){t.tpDiv.hide(n,$.timepicker._get(t,"showOptions"),r,i)}else{t.tpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i)}if(!n){i()}this._timepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.tpDiv)}}this._inDialog=false;var s=this._get(t,"onClose");if(s){s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t])}}},_tidyDialog:function(e){e.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this timepicker"}},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setTimeFromField:function(e){if(e.input.val()==e.lastVal){return}var t=this._get(e,"defaultTime");var n=t=="now"?this._getCurrentTimeRounded(e):t;if(e.inline==false&&e.input.val()!=""){n=e.input.val()}if(n instanceof Date){e.hours=n.getHours();e.minutes=n.getMinutes()}else{var r=e.lastVal=n;if(n==""){e.hours=-1;e.minutes=-1}else{var i=this.parseTime(e,r);e.hours=i.hours;e.minutes=i.minutes}}$.timepicker._updateTimepicker(e)},_optionTimepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string"){return t=="defaults"?$.extend({},$.timepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null}var i=t||{};if(typeof t=="string"){i={};i[t]=n}if(r){extendRemove(r.settings,i);if(this._curInst==r){this._hideTimepicker();this._updateTimepicker(r)}if(r.inline){this._updateTimepicker(r)}}},_setTimeTimepicker:function(e,t){var n=this._getInst(e);if(n){this._setTime(n,t);this._updateTimepicker(n);this._updateAlternate(n,t)}},_setTime:function(e,t,n){var r=e.hours;var i=e.minutes;if(t instanceof Date){e.hours=t.getHours();e.minutes=t.getMinutes()}else{var t=this.parseTime(e,t);e.hours=t.hours;e.minutes=t.minutes}if((r!=e.hours||i!=e.minutes)&&!n){e.input.trigger("change")}this._updateTimepicker(e);this._updateSelectedValue(e)},_getCurrentTimeRounded:function(e){var t=new Date,n=t.getMinutes(),r=this._get(e,"minutes"),i=Math.round(n/r.interval)*r.interval;t.setMinutes(i);return t},parseTime:function(e,t){var n=new Object;n.hours=-1;n.minutes=-1;if(!t)return"";var r=this._get(e,"timeSeparator"),i=this._get(e,"amPmText"),s=this._get(e,"showHours"),o=this._get(e,"showMinutes"),u=this._get(e,"optionalMinutes"),a=this._get(e,"showPeriod")==true,f=t.indexOf(r);if(f!=-1){n.hours=parseInt(t.substr(0,f),10);n.minutes=parseInt(t.substr(f+1),10)}else if(s&&(!o||u)){n.hours=parseInt(t,10)}else if(!s&&o){n.minutes=parseInt(t,10)}if(s){var l=t.toUpperCase();if(n.hours<12&&a&&l.indexOf(i[1].toUpperCase())!=-1){n.hours+=12}if(n.hours==12&&a&&l.indexOf(i[0].toUpperCase())!=-1){n.hours=0}}return n},selectNow:function(e){var t=$(e.target).attr("data-timepicker-instance-id"),n=$(t),r=this._getInst(n[0]);var i=new Date;r.hours=i.getHours();r.minutes=i.getMinutes();this._updateSelectedValue(r);this._updateTimepicker(r);this._hideTimepicker()},deselectTime:function(e){var t=$(e.target).attr("data-timepicker-instance-id"),n=$(t),r=this._getInst(n[0]);r.hours=-1;r.minutes=-1;this._updateSelectedValue(r);this._hideTimepicker()},selectHours:function(e){var t=$(e.currentTarget),n=t.attr("data-timepicker-instance-id"),r=parseInt(t.attr("data-hour")),i=e.data.fromDoubleClick,s=$(n),o=this._getInst(s[0]),u=this._get(o,"showMinutes")==true;if($.timepicker._isDisabledTimepicker(s.attr("id"))){return false}t.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");t.children("a").addClass("ui-state-active");o.hours=r;var a=this._get(o,"onMinuteShow"),f=this._get(o,"maxTime"),l=this._get(o,"minTime");if(a||f.minute||l.minute){this._updateMinuteDisplay(o)}this._updateSelectedValue(o);o._hoursClicked=true;if(o._minutesClicked||i||u==false){$.timepicker._hideTimepicker()}return false},selectMinutes:function(e){var t=$(e.currentTarget),n=t.attr("data-timepicker-instance-id"),r=parseInt(t.attr("data-minute")),i=e.data.fromDoubleClick,s=$(n),o=this._getInst(s[0]),u=this._get(o,"showHours")==true;if($.timepicker._isDisabledTimepicker(s.attr("id"))){return false}t.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");t.children("a").addClass("ui-state-active");o.minutes=r;this._updateSelectedValue(o);o._minutesClicked=true;if(o._hoursClicked||i||u==false){$.timepicker._hideTimepicker();return false}return false},_updateSelectedValue:function(e){var t=this._getParsedTime(e);if(e.input){e.input.val(t);e.input.trigger("change")}var n=this._get(e,"onSelect");if(n){n.apply(e.input?e.input[0]:null,[t,e])}this._updateAlternate(e,t);return t},_getParsedTime:function(e){if(e.hours==-1&&e.minutes==-1){return""}if(e.hours<e.hours.starts||e.hours>e.hours.ends){e.hours=0}if(e.minutes<e.minutes.starts||e.minutes>e.minutes.ends){e.minutes=0}var t="",n=this._get(e,"showPeriod")==true,r=this._get(e,"showLeadingZero")==true,i=this._get(e,"showHours")==true,s=this._get(e,"showMinutes")==true,o=this._get(e,"optionalMinutes")==true,u=this._get(e,"amPmText"),a=e.hours?e.hours:0,f=e.minutes?e.minutes:0,l=a?a:0,c="";if(l==-1){l=0}if(f==-1){f=0}if(n){if(e.hours==0){l=12}if(e.hours<12){t=u[0]}else{t=u[1];if(l>12){l-=12}}}var h=l.toString();if(r&&l<10){h="0"+h}var p=f.toString();if(f<10){p="0"+p}if(i){c+=h}if(i&&s&&(!o||p!=0)){c+=this._get(e,"timeSeparator")}if(s&&(!o||p!=0)){c+=p}if(i){if(t.length>0){c+=this._get(e,"periodSeparator")+t}}return c},_updateAlternate:function(e,t){var n=this._get(e,"altField");if(n){$(n).each(function(e,n){$(n).val(t)})}},_getTimeAsDateTimepicker:function(e){var t=this._getInst(e);if(t.hours==-1&&t.minutes==-1){return""}if(t.hours<t.hours.starts||t.hours>t.hours.ends){t.hours=0}if(t.minutes<t.minutes.starts||t.minutes>t.minutes.ends){t.minutes=0}return new Date(0,0,0,t.hours,t.minutes,0)},_getTimeTimepicker:function(e){var t=this._getInst(e);return this._getParsedTime(t)},_getHourTimepicker:function(e){var t=this._getInst(e);if(t==undefined){return-1}return t.hours},_getMinuteTimepicker:function(e){var t=this._getInst(e);if(t==undefined){return-1}return t.minutes}});$.fn.timepicker=function(e){if(!$.timepicker.initialized){$(document).mousedown($.timepicker._checkExternalClick);$.timepicker.initialized=true}if($("#"+$.timepicker._mainDivId).length===0){$("body").append($.timepicker.tpDiv)}var t=Array.prototype.slice.call(arguments,1);if(typeof e=="string"&&(e=="getTime"||e=="getTimeAsDate"||e=="getHour"||e=="getMinute"))return $.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this[0]].concat(t));if(e=="option"&&arguments.length==2&&typeof arguments[1]=="string")return $.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this[0]].concat(t));return this.each(function(){typeof e=="string"?$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this].concat(t)):$.timepicker._attachTimepicker(this,e)})};$.timepicker=new Timepicker;$.timepicker.initialized=false;$.timepicker.uuid=(new Date).getTime();$.timepicker.version="0.3.3";window["TP_jQuery_"+tpuuid]=$})(jQuery)